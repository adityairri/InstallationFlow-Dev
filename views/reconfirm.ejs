<!DOCTYPE html>
<html>

<head>
  <base href="/">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <title>Welcome To | Bootstrap Based Admin Template - Material Design</title>
  <!-- Favicon-->
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&subset=latin,cyrillic-ext" rel="stylesheet"
    type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">

  <!-- Bootstrap Core Css -->
  <link href="plugins/bootstrap/css/bootstrap.css" rel="stylesheet">

  <!-- Waves Effect Css -->
  <link href="plugins/node-waves/waves.css" rel="stylesheet" />

  <!-- Animation Css -->
  <link href="plugins/animate-css/animate.css" rel="stylesheet" />

  <!-- Morris Chart Css-->
  <link href="plugins/morrisjs/morris.css" rel="stylesheet" />

     <!-- JQuery DataTable Css -->
     <link href="//cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">

  <!-- Custom Css -->
  <link href="css/style.css" rel="stylesheet">

  <!-- AdminBSB Themes. You can choose a theme from css/themes instead of get all themes -->
  <link href="css/themes/all-themes.css" rel="stylesheet" />
  <script>
    localStorage.clear();
  </script>
  <script>
    $("#dateTime").datetimepicker({
      pickDate: false,
      pickTime: true,
      useSeconds: false,
      format: 'hh:mm',
      stepping: 30 //will change increments to 15m, default is 1m
    });
  </script>
</head>

<body class="theme-teal">

  <!-- #END# Page Loader -->
  <!-- Overlay For Sidebars -->
  <div class="overlay"></div>
  <!-- #END# Overlay For Sidebars -->
  <!-- Top Bar -->
  <nav class="navbar">
    <div class="container-fluid">
      <div class="navbar-header">
        <a href="javascript:void(0);" class="navbar-toggle collapsed" data-toggle="collapse"
          data-target="#navbar-collapse" aria-expanded="false"></a>
        <a href="javascript:void(0);" class="bars"></a>
        <a class="navbar-brand" href="index.html">INSTALLATION FLOW</a>
      </div>
      <div class="collapse navbar-collapse" id="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <!-- Call Search -->
          <li><a href="javascript:location.reload();"><i class="material-icons">refresh</i></a>
          </li>
          <!-- #END# Call Search -->


          <!-- <li class="pull-right"><a href="javascript:void(0);" class="js-right-sidebar" data-close="true"><i
                  class="material-icons">more_vert</i></a></li> -->
        </ul>
      </div>
    </div>
  </nav>

  <!-- Right Sidebar -->
  <aside id="rightsidebar" class="right-sidebar">
    <ul class="nav nav-tabs tab-nav-right" role="tablist">
      <li role="presentation" class="active"><a href="#settings" data-toggle="tab">SETTINGS</a></li>
    </ul>
    <div class="tab-content">
      <div role="tabpanel" class="tab-pane fade in active in active" id="settings">
        <div class="demo-settings">
          <p>ORDER SETTINGS</p>
          <ul class="setting-list">
            <li>
              <span>Accepting Orders</span>
              <div class="switch">
                <label><input type="checkbox" checked><span class="lever"></span></label>
              </div>
            </li>
            <li>
              <span>Auto Accept Orders</span>
              <div class="switch">
                <label><input type="checkbox"><span class="lever"></span></label>
              </div>
            </li>
          </ul>
          <!-- <p>SYSTEM SETTINGS</p>
          <ul class="setting-list">
            <li>
              <span>Notifications</span>
              <div class="switch">
                <label><input type="checkbox" checked><span class="lever"></span></label>
              </div>
            </li>
            <li>
              <span>Auto Updates</span>
              <div class="switch">
                <label><input type="checkbox" checked><span class="lever"></span></label>
              </div>
            </li>
          </ul> -->
          <p>ACCOUNT SETTINGS</p>
          <ul class="setting-list">
            <li>
              <span>Offline</span>
              <div class="switch">
                <label><input type="checkbox"><span class="lever"></span></label>
              </div>
            </li>
            <!-- <li>
              <span>Location Permission</span>
              <div class="switch">
                <label><input type="checkbox" checked><span class="lever"></span></label>
              </div>
            </li> -->
          </ul>
        </div>
      </div>
    </div>
  </aside>
  </section>
  <!-- #END# Right Sidebar -->
  <!-- #Top Bar -->


  <section class="content">
    <div class="container-fluid">
      <div class="block-header">
        <!-- <h2>DASHBOARD</h2> -->
      </div>
      <!-- Widgets -->
        <div class="row clearfix">
          <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3" onclick="window.location='/';">
            <div class="info-box-4 hover-zoom-effect">
              <div class="content">
                <div class="text"><b>OPEN ORDERS</b></div>
                <div class="number count-to" data-from="0" data-to="<%=newOrdersCount.length%>" data-speed="2"
                  data-fresh-interval="20"></div>
              </div>
            </div>
          </div>
          <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3" onclick="window.location='/reconfirm/0';">
            <div class="info-box-4 hover-zoom-effect bg-teal">
              <div class="content">
                <div class="text"><b>RECONFIRM</b></div>
                <div class="number count-to" data-from="0" data-to="<%=reconfirmOrdersCount%>" data-speed="2"
                  data-fresh-interval="20">
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3" onclick="window.location='/readyForInstallation/0';">
            <div class="info-box-4 hover-zoom-effect">
                <div class="content">
                    <div class="text">READY FOR INSTALLATION</div>
                    <div class="number count-to" data-from="0" data-to="<%=readyToInstallCount.length%>" data-speed="2" data-fresh-interval="20">
                    </div>
                </div>
            </div>
        </div>
          <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3" onclick="window.location='/rescheduled';">
            <div class="info-box-4 hover-zoom-effect">
              <div class="content">
                <div class="text"><b>RESCHEDULED ORDERS</b></div>
                <div class="number count-to" data-from="0" data-to="<%=totalRescheduleCount%>" data-speed="2"
                  data-fresh-interval="20">
                </div>
              </div>
            </div>
          </div>
          
         
        </div>




        <div class="row clearfix">
         
          <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
            <div class="info-box-4 hover-zoom-effect">
              <div class="content">
                <div class="text">
                  <b>SE RESPONSE STATUS</b>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <div class="text">
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4"
                      onclick="window.location='/seResponseStatus/0/pending';">
                      Pending </br> <b>
                        <%=sePendingList.length%>
                      </b>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4"
                      onclick="window.location='/seResponseStatus/0/accepted';">
                      Accepted </br><b>
                        <%=seAcceptedList.length%>
                      </b>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4"
                      onclick="window.location='/seResponseStatus/0/declined';">
                      Declined </br><b>
                        <%=seDeclinedList.length%>
                      </b>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
            <div class="info-box-4 hover-zoom-effect">
              <div class="content">
                <div class="text">
                  <b>FARMER RESPONSE STATUS</b>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <div class="text">
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4"
                      onclick="window.location='/viewFarmerStatus/pending';">
                      Pending </br><b>
                        <%=farmerPendingList.length%>
                      </b>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4"
                      onclick="window.location='/viewFarmerStatus/accepted';">
                      Accepted </br><b>
                        <%=farmerAcceptedList.length%>
                      </b>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4"
                      onclick="window.location='/viewFarmerStatus/cancelled';">
                      Cancelled </br><b>
                        <%=farmerDeclinedList.length%>
                      </b>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
            <div class="info-box-4 hover-zoom-effect">
              <div class="content">
                <div class="text">
                  <b>INSTALLATION STATUS</b>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <div class="text">
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4"
                      onclick="window.location='/viewInstallationStatus/pending';">
                      In Progress </br><b>
                        <%=installationPendingList.length%>
                      </b>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4"
                      onclick="window.location='/viewInstallationStatus/partial';">
                      Partial </br><b>
                        <%=installationPartialCompleteList.length%>
                      </b>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4"
                      onclick="window.location='/viewInstallationStatus/completed';">
                      Completed </br><b>
                        <%=installationCompletedList.length%>
                      </b>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>


      <!-- #END# Widgets -->

      <!-- Hover Rows -->
      <div class="row clearfix">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <div class="card">
            <div class="header">
              <h2>
                RECONFIRM ORDERS
              </h2>
              <ul class="header-dropdown m-r--5">
                <li class="dropdown">
                  <div class="row clearfix col-lg-12 col-md-12">
                    <div class="col-lg-10 col-md-10">
                        <input type="date" class="form-control date" id="date"
                            onchange="handler(event)">
                    </div>
                    <div class="col-lg-2 col-md-2">
                        <a href="reconfirm/0" id="dateFilter">
                            <button type="button" class="btn bg-teal waves-effect">
                                <i class="material-icons">search</i>
                            </button>
                        </a>
                    </div>
                    <script>
                        function handler(e) {
                            var date = e.target.value;
                            url = "/reconfirm/" + date;
                            $("#dateFilter").attr("href", url);
                            return true;
                        }
                    </script>
                </div>
                </li>
              </ul>
            </div>
            <div class="body table-responsive">
              <table class="table table-bordered table-striped table-hover js-basic-example dataTable" id="reconfirmTable">
                <thead>
                  <tr>
                    <th style="text-align: center;">ORDER ID</th>
                    <th style="text-align: center;">BDE NAME</th>
                    <th style="text-align: center;">CREATED DATE</th>
                    <th style="text-align: center;">FARMER NAME</th>
                    <th style="text-align: center;">FARM NAME</th>
                    <th style="text-align: center;">FARMER MOBILE</th>
                    <th style="text-align: center;">REGION</th>
                    <th style="text-align: center;">ITEMS &nbsp;-&nbsp; ORD &nbsp;-&nbsp; INST</th>
                    <th style="text-align: center;">REMARKS</th>
                    <th style="text-align: center;">ACTION</th>
                  </tr>
                </thead>
                <tfoot>
                  <tr>
                    <th style="text-align: center;">ORDER ID</th>
                    <th style="text-align: center;">BDE NAME</th>
                    <th style="text-align: center;">CREATED DATE</th>
                    <th style="text-align: center;">FARMER NAME</th>
                    <th style="text-align: center;">FARM NAME</th>
                    <th style="text-align: center;">FARMER MOBILE</th>
                    <th style="text-align: center;">REGION</th>
                    <th style="text-align: center;">ITEMS &nbsp;-&nbsp; ORD &nbsp;-&nbsp; INST</th>
                    <th style="text-align: center;">REMARKS</th>
                    <th style="text-align: center;">ACTION</th>
                  </tr>
                </tfoot>
                <tbody style="text-align: center;">
                  <% data1.forEach(function(singleData){ %>
                    <tr>
                      <td>
                        <%= singleData.data.order.woo_commerce_order_id %>
                      </td>
                      <td>
                        <%= singleData.data.order.farmer.relationship_BDE.first_name %>
                      </td>
                      <td>
                        <%= singleData.data.created_date.substring(0,10) %>
                      </td>
                      <td>
                        <%= singleData.data.order.farmer.firstname %>
                      </td>
                      <td>
                        <% singleData.data.farms.forEach(singleFarmName=>{%>
                          <%= singleFarmName.farm.farm_name %> </br>
                          <%}) %>

                      </td>
                      <td>
                        <%= singleData.data.order.farmer.mobile_number %></br><a
                            href="tel:<%= singleData.data.order.farmer.mobile_number %>"><button type="button"
                              class="btn bg-teal btn-circle waves-effect waves-circle waves-float">
                              <i class="material-icons">call</i>
                            </button></a>
                      </td>
                      <td> <button data-trigger="focus" data-container="body" data-toggle="popover"
                        data-placement="top" title="Shipping Address" data-content="<%= singleData.data.order.shipping %>">
                          <%= singleData.data.region %> </button>
                        </td>
                        <td>
                          <% singleData.data.order.items.forEach(function(itemsList){ %>
                            <% if(itemsList.name=="APFC - Automatic power factor Controller" ){%>
                              APFC - <%= itemsList.quantity %> - <%= itemsList.completed %> </br>
                                  <%}if(itemsList.name=="Powermon 2.0"){%>
                                    Powermon - <%= itemsList.quantity %> - <%= itemsList.completed %></br>
                                        <%}%>
  
                                          <% }) %>
                        </td>
                      <td>
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                            <% singleData.remarks.slice(0, 3).forEach(singleRemark=> {%>
                              <% if(singleRemark.remarks.length !=0 ){%>
                                <%= singleRemark.remarks%></br>
                                  <%}else if(singleRemark.remarks.length==0){%>
                                    No Remarks
                                    <%}%>
                                      <% }) %>

                                        <div class="modal fade" id="modal<%=singleData.data.id%>" tabindex="-1"
                                          role="dialog">
                                          <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                              <div class="modal-header">
                                                <h4 class="modal-title" id="defaultModalLabel">REMARKS</h4>
                                              </div>
                                              <div class="modal-body">
                                                <table>
                                                  <% singleData.remarks.forEach(singleRemark=> {%>
                                                    <% if(singleRemark.remarks.length !=0 ){%>
                                                      <tr>
                                                        <td>
                                                          <%= singleRemark.modified_date%>
                                                        </td>
                                                        <td>
                                                          <%= singleRemark.remarks%>
                                                        </td>
                                                      </tr>
                                                      <%}else if(singleRemark.remarks.length==0){%>
                                                        No Remarks
                                                        <%}%>
                                                          <% }) %>
                                                </table>
                                              </div>
                                              <div class="modal-footer">
                                                <button type="button" class="btn btn-link waves-effect"
                                                  data-dismiss="modal">CLOSE</button>
                                              </div>
                                            </div>
                                          </div>
                                        </div>


                                        <i class="material-icons" data-toggle="modal"
                                          data-target="#modal<%=singleData.data.id%>">more_horiz</i>

                        </div>
                        <style>
                          li {
                            list-style-type: none;
                          }
                        </style>

                      </td>
                      <td>
                        <div class="row clearfix">
                          <a href="/confirmFarmerReconfirmDate/<%=singleData.data.id%>"><button class="btn bg-green waves-effect col-lg-12 col-md-12 col-sm-12 col-xs-12">Confirm Date</button>
                        </a></br>
                        <a href="#"><button class="btn bg-orange waves-effect col-lg-12 col-md-12 col-sm-12 col-xs-12" disabled>Reschedule</button>
                      </a>
                        </div>
                        
                      </td>
                    </tr>
                    <% }) %>
                </tbody>
              </table>

            </div>
          </div>
        </div>
      </div>
      <!-- #END# Hover Rows -->
    </div>

  </section>


  <script>
    $(document).ready( function () {
    $('#reconfirmTable').DataTable();
} );
  </script>

  <!-- Jquery Core Js -->
  <script src="plugins/jquery/jquery.min.js"></script>
  <script src="js/pages/ui/tooltips-popovers.js"></script>

  <!-- Bootstrap Core Js -->
  <script src="plugins/bootstrap/js/bootstrap.js"></script>

  <!-- Jquery DataTable Plugin Js -->
  <script src="//cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>

  <!-- Slimscroll Plugin Js -->
  <script src="plugins/jquery-slimscroll/jquery.slimscroll.js"></script>

  <!-- Waves Effect Plugin Js -->
  <script src="plugins/node-waves/waves.js"></script>

  <!-- Jquery CountTo Plugin Js -->
  <script src="plugins/jquery-countto/jquery.countTo.js"></script>

  <!-- Morris Plugin Js -->
  <script src="plugins/raphael/raphael.min.js"></script>
  <script src="plugins/morrisjs/morris.js"></script>

  <!-- ChartJs -->
  <script src="plugins/chartjs/Chart.bundle.js"></script>

  <!-- Flot Charts Plugin Js -->
  <script src="plugins/flot-charts/jquery.flot.js"></script>
  <script src="plugins/flot-charts/jquery.flot.resize.js"></script>
  <script src="plugins/flot-charts/jquery.flot.pie.js"></script>
  <script src="plugins/flot-charts/jquery.flot.categories.js"></script>
  <script src="plugins/flot-charts/jquery.flot.time.js"></script>

  <!-- Sparkline Chart Plugin Js -->
  <script src="plugins/jquery-sparkline/jquery.sparkline.js"></script>

  <!-- Custom Js -->
  <script src="js/admin.js"></script>
  <script src="js/pages/index.js"></script>

  <!-- Demo Js -->
  <script src="js/demo.js"></script>
</body>

</html>